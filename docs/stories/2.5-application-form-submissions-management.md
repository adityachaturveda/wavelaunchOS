# Story 2.5: Application Form Submissions Management

## Status
Ready

## Story

**As a** founder,
**I want** to view and manage application form submissions in the CRM,
**so that** I can triage new applicants efficiently.

## Acceptance Criteria

1. CRM submissions list page available at `/app/applications`. @docs/prd/epic-details.md#us25-application-form-submissions-management
2. Table shows submission date, applicant name, email, status, and action buttons. @docs/prd/epic-details.md#us25-application-form-submissions-management
3. Filters for status (Pending, Processed, Rejected) and search by name/email. @docs/prd/epic-details.md#us25-application-form-submissions-management
4. Row click opens side panel with full submission details. @docs/prd/epic-details.md#us25-application-form-submissions-management
5. Actions include View Full Details, Approve, Reject; results persist to database. @docs/prd/epic-details.md#us25-application-form-submissions-management
6. Approve action creates/updates creator status to "Active" (using Story 2.4 output). @docs/prd/epic-details.md#us25-application-form-submissions-management
7. Reject action updates submission status to "Rejected" with reason. @docs/prd/epic-details.md#us25-application-form-submissions-management

## Tasks / Subtasks

- [ ] Build submissions list page (AC: 1, 2, 3) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Create `apps/crm/app/applications/page.tsx` list view using shadcn/ui table primitives. [Source: architecture.md#31-shadcnui-integration]
  - [ ] Fetch submissions via server component loader from shared repository helpers. @docs/stories/2.3-form-submission-api.md
  - [ ] Implement status filter pills and search input with debounced queries. @docs/front-end-spec/user-flows.md#flow-4-application-form-submission-external-user
- [ ] Add submission detail side panel (AC: 4, 5) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Introduce `SubmissionDetailSheet` component under `apps/crm/src/components/submissions/`. [Source: architecture.md#4-project-structure-relevant-parts]
  - [ ] Display full JSON context formatted for readability (accordion sections). @docs/front-end-spec/wireframes-mockups.md#screen-creator-detail
- [ ] Approve action workflow (AC: 5, 6) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Call backend mutation to promote submission, ensuring creator status set to "Active". @docs/stories/2.4-automatic-creator-brand-record-creation.md
  - [ ] Show success toast and refresh table state on completion. [Source: architecture.md#1-overview]
- [ ] Reject action workflow (AC: 5, 7) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Capture rejection reason via modal form before updating status. @docs/prd/epic-details.md#us25-application-form-submissions-management
  - [ ] Persist status change and update UI badges. @docs/prd/epic-details.md#us25-application-form-submissions-management
- [ ] Table interactions & UX polish (AC: 2, 3, 4) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Add pagination or infinite scroll handling for large submission volumes. [Source: architecture.md#1-overview]
  - [ ] Ensure keyboard and screen-reader accessibility for row selection and actions. @docs/front-end-spec/accessibility-guidelines.md#table-accessibility

## Dev Notes

### Previous Story Insights
- Depends on Stories 2.3 and 2.4 to populate and process submissions before CRM views update. @docs/stories/2.3-form-submission-api.md @docs/stories/2.4-automatic-creator-brand-record-creation.md
- Creator activation after approval must align with CRM roles defined earlier; no extra architecture notes.

### Data Models
- `ApplicationFormSubmissions` should expose status, timestamps, and processed creator/brand IDs for display. @docs/prd/epic-details.md#us25-application-form-submissions-management
- Creator records must include status enum covering "New Application" â†’ "Active" transitions. @docs/prd/epic-details.md#us24-automatic-creatorbrand-record-creation

### API Specifications
- Backend mutations for approve/reject can reuse shared application-form repository to update statuses. @docs/prd/technical-assumptions.md#service-architecture
- Implement protected APIs under CRM app to restrict actions to Founder/Admin roles. @docs/stories/1.4-basic-authentication-system.md

### Component Specifications
- Use shadcn/ui `Table`, `Sheet`, `Badge`, and `Button` components for consistent UI. [Source: architecture.md#31-shadcnui-integration]
- Side panel should mirror design language from creator detail view. @docs/front-end-spec/wireframes-mockups.md#screen-creator-detail

### File Locations
- List page: `apps/crm/app/applications/page.tsx`. [Source: architecture.md#4-project-structure-relevant-parts]
- Detail components: `apps/crm/src/components/submissions/`. [Source: architecture.md#4-project-structure-relevant-parts]
- API routes for approve/reject: `apps/crm/app/api/applications/[id]/(approve|reject)/route.ts`. [Source: architecture.md#4-project-structure-relevant-parts]

### Testing Requirements
- Integration tests for approve/reject mutations ensuring status transitions and creator activation. @docs/prd/technical-assumptions.md#testing-requirements
- React Testing Library coverage for table filtering, search, and detail panel behavior. [Source: architecture.md#2-key-architectural-decisions]
- Snapshot/regression tests for table layout across viewports. @docs/front-end-spec/accessibility-guidelines.md#table-accessibility

### Technical Constraints
- Ensure list queries are paginated to avoid heavy loads; consider caching via React Server Components. [Source: architecture.md#1-overview]
- Actions must respect RBAC; unauthorized roles should see disabled or hidden controls. @docs/stories/1.4-basic-authentication-system.md

## Testing

- [ ] Integration: Approve/Reject API endpoints update DB and return expected payloads. @docs/prd/technical-assumptions.md#testing-requirements
- [ ] Component: Table renders filters, search, and detail panel interactions without errors. [Source: architecture.md#2-key-architectural-decisions]
- [ ] Manual: Verify end-to-end flow from new submission to approval/change in creator status. @docs/prd/epic-details.md#us25-application-form-submissions-management
- [ ] Accessibility: Run axe audit on applications page to ensure compliance. @docs/front-end-spec/accessibility-guidelines.md#table-accessibility

## Change Log

| Date       | Version | Description                                      | Author |
| ---------- | ------- | ------------------------------------------------ | ------ |
| 2025-11-03 | 0.1     | Initial draft for submissions management in CRM | Bob    |

## QA Results

- Pending
