# Story 1.7: Basic Layout and Navigation

## Status
Ready

## Story

**As a** team member,
**I want** a consistent layout with navigation,
**so that** I can access different sections of the CRM.

## Acceptance Criteria

1. Root layout created with header, sidebar navigation, main content area. @docs/prd/epic-details.md#epic-1-foundation--authentication
2. Navigation menu includes: Dashboard, Creators, Brands, Projects, Credentials, Deliverables, Audit Logs, Settings. @docs/prd/epic-details.md#epic-1-foundation--authentication
3. User profile dropdown in header (shows email, logout button). @docs/prd/epic-details.md#epic-1-foundation--authentication
4. Responsive layout works on desktop and laptop screens. @docs/prd/epic-details.md#epic-1-foundation--authentication
5. Light mode styling applied with professional aesthetic. @docs/prd/epic-details.md#epic-1-foundation--authentication
6. Loading states handled gracefully. @docs/prd/epic-details.md#epic-1-foundation--authentication

## Tasks / Subtasks

- [ ] Establish CRM shell layout (AC: 1, 2, 4, 5) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Update `apps/crm/src/app/layout.tsx` to define header, sidebar, and main slots using App Router conventions. [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Extract reusable `Header` and `Sidebar` components under `apps/crm/src/components/` following project structure guidance. [Source: architecture.md#4-project-structure-relevant-parts]
- [ ] Implement navigation menu structure (AC: 2) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Create a typed navigation config exporting label, icon, and route metadata. [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Render shadcn/ui navigation primitives styled with Tailwind utility classes for the sidebar list. [Source: architecture.md#31-shadcnui-integration]
  - [ ] Provide a fallback placeholder state when no navigation entries are available (permissions or loading). [Source: architecture.md#1-overview]
- [ ] Add user profile dropdown (AC: 3) [Source: architecture.md#31-shadcnui-integration]
  - [ ] Use shadcn/ui dropdown menu to show signed-in email and logout action in the header. [Source: architecture.md#31-shadcnui-integration]
  - [ ] Wire logout action to NextAuth sign-out flow within client-safe components. @docs/stories/1.4-basic-authentication-system.md
- [ ] Ensure responsive and visual styling (AC: 4, 5) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Apply Tailwind grid/flex utilities to adapt sidebar and content for desktop viewports. [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Confirm light theme tokens and typography align with design system defaults. [Source: architecture.md#31-shadcnui-integration]
- [ ] Provide loading states and skeletons (AC: 6) [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Implement `apps/crm/src/app/(admin)/layout.tsx` suspense boundaries with fallback skeletons. [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Add route-specific `loading.tsx` files for dashboard and admin areas to preserve layout while data resolves. [Source: architecture.md#2-key-architectural-decisions]
  - [ ] Display a lightweight skeleton for the navigation sidebar while session or role data loads. [Source: architecture.md#1-overview]

## Dev Notes

### Previous Story Insights
- Layout expects authenticated sessions supplied by the NextAuth stack defined in the architecture decisions; ensure header/sidebar render only after `auth()` resolves. [Source: architecture.md#2-key-architectural-decisions]
- No additional guidance found in architecture docs regarding prior user-management stories; rely on current layout implementation.

### Data Models
- No specific guidance found in architecture docs.

### API Specifications
- No specific guidance found in architecture docs.

### Component Specifications
- Layout and navigation components must leverage shadcn/ui primitives with Tailwind customization per the component strategy. [Source: architecture.md#31-shadcnui-integration]

### File Locations
- Place shared header and sidebar components inside `apps/crm/src/components/` to align with documented structure. [Source: architecture.md#4-project-structure-relevant-parts]

### Technical Constraints
- Layout must remain compatible with the Next.js App Router and React stack defined for the CRM. [Source: architecture.md#2-key-architectural-decisions]
- Styling and theming rely on Tailwind CSS per the architecture baseline. [Source: architecture.md#2-key-architectural-decisions]
- Architecture overview emphasizes performance reliability; expose skeleton states instead of empty navigation to maintain perceived responsiveness. [Source: architecture.md#1-overview]

## Testing

- [ ] Automated: Add component-level tests verifying navigation links render and highlight active route. @docs/prd/technical-assumptions.md#testing-requirements
- [ ] Visual: Validate header/sidebar responsiveness at 1440px and 1024px breakpoints. @docs/prd/technical-assumptions.md#testing-requirements
- [ ] Manual: Confirm profile dropdown displays email and completes logout flow. @docs/prd/epic-details.md#epic-1-foundation--authentication
- [ ] Manual: Trigger loading states to ensure skeletons display without layout shift. @docs/prd/epic-details.md#epic-1-foundation--authentication

## Change Log

| Date       | Version | Description                                   | Author |
| ---------- | ------- | --------------------------------------------- | ------ |
| 2025-11-03 | 0.1     | Initial draft for basic layout and navigation | Bob    |

## QA Results

- Pending
